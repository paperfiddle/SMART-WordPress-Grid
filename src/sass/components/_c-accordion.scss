//
// @file /sass/components/_c-accordion.scss
//
// @file /js/c-accordion.js
// @file /js/velocity.js
// @file /doc/svg-base64.scss
// @link https://www.cssscript.com/accessible-accordion-ariaaccordion/
// 


//
// .c-accordion - Base 
// Nothing here - Allows no-JS fallback
// 

.c-accordion {	
	&__header {}
	&__btn {}	
	&__panel {}		
} //


/**
 * c-accordion - Button Base
 * ======================================== */

 // Button is added via JS to inside of `__header`
 // Okay to fully style - no fallback needed. 

.c-accordion__btn {

	@include display-flex;
	@include align-items(baseline);
	width: 100%;
	text-align: left;

	// &[aria-selected="true"] {}
	// &[aria-selected="false"] {}

	&:before,
	&:after {
		content: '';
		@include display-flex;
		width: 1.266rem; 
		height: 1.266rem; 		
	}

	&:before {margin: 0 0.5rem 0 0.25rem;}

	// TODO work out `display` to support icons on right
	// &:after {
	// 	margin: 0 0.25rem 0 0.5rem;		
	// }

} // 


// Angle Icons
// We could also switch to `:after`?

.c-accordion__btn {

	&[aria-expanded="true"]:before {
		background: no-repeat center center
			url("data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%23ffffff' d='M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z'%3E%3C/path%3E%3C/svg%3E");
	} // 

	&[aria-expanded="false"]:before {
		background: no-repeat center center
			url("data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 512'%3E%3Cpath fill='%23ffffff' d='M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z'%3E%3C/path%3E%3C/svg%3E");
	} // 

} //


/**
 * c-accordion - Panel Base
 * ======================================== */

// Note we do not use `display: none`
// Instead, we toggle `height` + `opacity` + `scale` 
// Animations provided by `c-accordion.js` via `velocity.js` 

.c-accordion__panel {
	// Velocity.js support
	-webkit-transform-origin: top;
	    -ms-transform-origin: top;
	        transform-origin: top;

	&[aria-hidden="true"] { 
		overflow: hidden;
		height: 0px;
		transform: scale(0);
		opacity: 0;
		padding: 0;
		margin: 0;
	}

	&[aria-hidden="false"] {
		padding: 1rem 0.5rem;
	}
	&[aria-hidden="false"] :first-child {
		margin-top: 0;
		padding-top: 0;
	}

	// TODO: Velocity hink on 2nd+ click
	// &[aria-hidden="false"] :last-child {
	// 	margin-bottom: 0;
	// 	padding-bottom: 0;
	// }

} //


/**
 * c-accordion - Styles
 * ======================================== */

// Use `[role]` to apply styles only when JS has loaded. 
// Graceful fallback to default typography. 

.c-accordion {

	&[role="presentation"] {
		max-width: 810px;
		margin: 1rem auto;
	}
	&[role="presentation"] &__header {
		margin: 2px 0;	
	}
	&[role="presentation"] &__panel {
		border: 1px solid $mc__gray-300;
	}

} //


.c-accordion__btn {

	@include sans-400;
	@include font-size(1.424);
	padding: 0.25rem 0.4rem;
	border: none;

	@include bg-linear-h($color__black-a, 1, $color__black, 1);
	color: white;

	&:hover, &:active, &:focus,
	&[aria-expanded="true"],
	&[aria-selected="true"] {
		@include bg-linear-h($color__secondary, 1, $color__secondary-a, 1);
	}	
	
	// &[aria-expanded="true"] {}
	// &[aria-expanded="false"] {}
	// &[aria-selected="true"] {}
	// &[aria-selected="false"] {}

} //


// .c-accordion__panel {
// 	&[aria-hidden="true"] {}
// 	&[aria-hidden="false"] {}
// } //

